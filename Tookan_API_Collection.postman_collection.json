{
	"info": {
		"_postman_id": "tookan-integration-api",
		"name": "Tookan Integration API",
		"description": "Complete API collection for Tookan Integration Dashboard",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Health Check",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/api/health",
					"host": ["{{baseUrl}}"],
					"path": ["api", "health"]
				}
			}
		},
		{
			"name": "Orders",
			"item": [
				{
					"name": "Get Cached Orders",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/tookan/orders/cached?limit=10&page=1",
							"host": ["{{baseUrl}}"],
							"path": ["api", "tookan", "orders", "cached"],
							"query": [
								{"key": "limit", "value": "10"},
								{"key": "page", "value": "1"},
								{"key": "dateFrom", "value": "", "disabled": true},
								{"key": "dateTo", "value": "", "disabled": true},
								{"key": "driverId", "value": "", "disabled": true},
								{"key": "customerId", "value": "", "disabled": true},
								{"key": "status", "value": "", "disabled": true},
								{"key": "search", "value": "", "disabled": true}
							]
						}
					}
				},
				{
					"name": "Get All Orders (Tookan)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/tookan/orders?dateFrom=2025-01-01&dateTo=2025-01-31&limit=100",
							"host": ["{{baseUrl}}"],
							"path": ["api", "tookan", "orders"],
							"query": [
								{"key": "dateFrom", "value": "2025-01-01"},
								{"key": "dateTo", "value": "2025-01-31"},
								{"key": "limit", "value": "100"}
							]
						}
					}
				},
				{
					"name": "Get Order by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/tookan/order/:orderId",
							"host": ["{{baseUrl}}"],
							"path": ["api", "tookan", "order", ":orderId"],
							"variable": [
								{"key": "orderId", "value": "12345"}
							]
						}
					}
				},
				{
					"name": "Update Order",
					"request": {
						"method": "PUT",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"cod_amount\": 125.50,\n  \"order_fees\": 8.00,\n  \"fleet_id\": 1001,\n  \"notes\": \"Updated order\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/order/:orderId",
							"host": ["{{baseUrl}}"],
							"path": ["api", "order", ":orderId"],
							"variable": [
								{"key": "orderId", "value": "12345"}
							]
						}
					}
				},
				{
					"name": "Update Order COD",
					"request": {
						"method": "PUT",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"cod_amount\": 125.50,\n  \"cod_collected\": true\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/tookan/task/:jobId/cod",
							"host": ["{{baseUrl}}"],
							"path": ["api", "tookan", "task", ":jobId", "cod"],
							"variable": [
								{"key": "jobId", "value": "12345"}
							]
						}
					}
				},
				{
					"name": "Re-order",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"url": {
							"raw": "{{baseUrl}}/api/order/:orderId/reorder",
							"host": ["{{baseUrl}}"],
							"path": ["api", "order", ":orderId", "reorder"],
							"variable": [
								{"key": "orderId", "value": "12345"}
							]
						}
					}
				},
				{
					"name": "Return Order",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"url": {
							"raw": "{{baseUrl}}/api/order/:orderId/return",
							"host": ["{{baseUrl}}"],
							"path": ["api", "order", ":orderId", "return"],
							"variable": [
								{"key": "orderId", "value": "12345"}
							]
						}
					}
				},
				{
					"name": "Delete Order",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/order/:orderId",
							"host": ["{{baseUrl}}"],
							"path": ["api", "order", ":orderId"],
							"variable": [
								{"key": "orderId", "value": "12345"}
							]
						}
					}
				}
			]
		},
		{
			"name": "COD Management",
			"item": [
				{
					"name": "Get COD Confirmations",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/cod/confirmations?dateFrom=&dateTo=",
							"host": ["{{baseUrl}}"],
							"path": ["api", "cod", "confirmations"],
							"query": [
								{"key": "dateFrom", "value": "", "disabled": true},
								{"key": "dateTo", "value": "", "disabled": true},
								{"key": "driverId", "value": "", "disabled": true},
								{"key": "merchantId", "value": "", "disabled": true},
								{"key": "status", "value": "", "disabled": true}
							]
						}
					}
				},
				{
					"name": "Get COD Calendar",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/cod/calendar?dateFrom=&dateTo=",
							"host": ["{{baseUrl}}"],
							"path": ["api", "cod", "calendar"],
							"query": [
								{"key": "dateFrom", "value": "", "disabled": true},
								{"key": "dateTo", "value": "", "disabled": true}
							]
						}
					}
				},
				{
					"name": "Get COD Queue",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/cod/queue",
							"host": ["{{baseUrl}}"],
							"path": ["api", "cod", "queue"]
						}
					}
				},
				{
					"name": "Settle COD",
					"request": {
						"method": "PUT",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"paymentMethod\": \"cash\",\n  \"userId\": \"user-123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/cod/settle/:codId",
							"host": ["{{baseUrl}}"],
							"path": ["api", "cod", "settle", ":codId"],
							"variable": [
								{"key": "codId", "value": "COD-12345"}
							]
						}
					}
				},
				{
					"name": "Add COD to Queue",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"driverId\": 1001,\n  \"amount\": 125.50,\n  \"orderId\": \"12345\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/cod/queue/add",
							"host": ["{{baseUrl}}"],
							"path": ["api", "cod", "queue", "add"]
						}
					}
				}
			]
		},
		{
			"name": "Wallets",
			"item": [
				{
					"name": "Get Customer Wallets",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/customers/wallets",
							"host": ["{{baseUrl}}"],
							"path": ["api", "customers", "wallets"]
						}
					}
				},
				{
					"name": "Get Driver Wallet",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/tookan/driver-wallet/:fleetId",
							"host": ["{{baseUrl}}"],
							"path": ["api", "tookan", "driver-wallet", ":fleetId"],
							"variable": [
								{"key": "fleetId", "value": "1001"}
							]
						}
					}
				},
				{
					"name": "Driver Wallet Transaction",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"fleet_id\": 1001,\n  \"transaction_type\": \"credit\",\n  \"amount\": 50.00,\n  \"description\": \"Payment\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/tookan/driver-wallet/transaction",
							"host": ["{{baseUrl}}"],
							"path": ["api", "tookan", "driver-wallet", "transaction"]
						}
					}
				},
				{
					"name": "Customer Wallet Payment",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"vendor_id\": 2001,\n  \"amount\": 100.00,\n  \"description\": \"Payment\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/tookan/customer-wallet/payment",
							"host": ["{{baseUrl}}"],
							"path": ["api", "tookan", "customer-wallet", "payment"]
						}
					}
				}
			]
		},
		{
			"name": "Fleets & Customers",
			"item": [
				{
					"name": "Get All Fleets",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/tookan/fleets",
							"host": ["{{baseUrl}}"],
							"path": ["api", "tookan", "fleets"]
						}
					}
				},
				{
					"name": "Add Fleet",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"fleet_name\": \"Ahmed K.\",\n  \"fleet_phone\": \"+973 1111 2222\",\n  \"fleet_email\": \"ahmed@example.com\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/tookan/fleet/add",
							"host": ["{{baseUrl}}"],
							"path": ["api", "tookan", "fleet", "add"]
						}
					}
				},
				{
					"name": "Get All Customers",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/tookan/customers?offset=0&limit=100",
							"host": ["{{baseUrl}}"],
							"path": ["api", "tookan", "customers"],
							"query": [
								{"key": "offset", "value": "0"},
								{"key": "limit", "value": "100"}
							]
						}
					}
				},
				{
					"name": "Add Customer",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"customer_name\": \"Sara Mohammed\",\n  \"customer_phone\": \"+973 9999 1111\",\n  \"customer_email\": \"sara@example.com\",\n  \"customer_address\": \"123 Main St, Manama\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/tookan/customer/add",
							"host": ["{{baseUrl}}"],
							"path": ["api", "tookan", "customer", "add"]
						}
					}
				}
			]
		},
		{
			"name": "Reports",
			"item": [
				{
					"name": "Get Reports Summary",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/reports/summary?dateFrom=2025-01-01&dateTo=2025-01-31",
							"host": ["{{baseUrl}}"],
							"path": ["api", "reports", "summary"],
							"query": [
								{"key": "dateFrom", "value": "2025-01-01"},
								{"key": "dateTo", "value": "2025-01-31"}
							]
						}
					}
				},
				{
					"name": "Export Orders (CSV)",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"format\": \"csv\",\n  \"filters\": {\n    \"dateFrom\": \"2025-01-01\",\n    \"dateTo\": \"2025-01-31\"\n  },\n  \"columns\": [\"id\", \"date\", \"merchant\", \"customer\", \"cod\", \"status\"]\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/reports/orders/export",
							"host": ["{{baseUrl}}"],
							"path": ["api", "reports", "orders", "export"]
						}
					}
				},
				{
					"name": "Export Orders (Excel)",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"format\": \"excel\",\n  \"filters\": {\n    \"dateFrom\": \"2025-01-01\",\n    \"dateTo\": \"2025-01-31\"\n  },\n  \"columns\": [\"id\", \"date\", \"merchant\", \"customer\", \"cod\", \"status\"]\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/reports/orders/export",
							"host": ["{{baseUrl}}"],
							"path": ["api", "reports", "orders", "export"]
						}
					}
				},
				{
					"name": "Daily Report",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/reports/daily?format=csv",
							"host": ["{{baseUrl}}"],
							"path": ["api", "reports", "daily"],
							"query": [
								{"key": "format", "value": "csv", "description": "csv or excel"}
							]
						}
					}
				},
				{
					"name": "Monthly Report",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/reports/monthly?month=2025-01&format=csv",
							"host": ["{{baseUrl}}"],
							"path": ["api", "reports", "monthly"],
							"query": [
								{"key": "month", "value": "2025-01"},
								{"key": "format", "value": "csv", "description": "csv or excel"}
							]
						}
					}
				}
			]
		},
		{
			"name": "Withdrawal Requests",
			"item": [
				{
					"name": "Create Withdrawal Request",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"customerId\": \"CU001\",\n  \"vendor_id\": 2001,\n  \"amount\": 500.00,\n  \"requestType\": \"customer\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/withdrawal/request",
							"host": ["{{baseUrl}}"],
							"path": ["api", "withdrawal", "request"]
						}
					}
				},
				{
					"name": "Get All Withdrawal Requests",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/withdrawal/requests?status=Pending",
							"host": ["{{baseUrl}}"],
							"path": ["api", "withdrawal", "requests"],
							"query": [
								{"key": "status", "value": "Pending", "disabled": true},
								{"key": "customerId", "value": "", "disabled": true}
							]
						}
					}
				},
				{
					"name": "Approve Withdrawal",
					"request": {
						"method": "PUT",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"userId\": \"admin-123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/withdrawal/request/:id/approve",
							"host": ["{{baseUrl}}"],
							"path": ["api", "withdrawal", "request", ":id", "approve"],
							"variable": [
								{"key": "id", "value": "1"}
							]
						}
					}
				},
				{
					"name": "Reject Withdrawal",
					"request": {
						"method": "PUT",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"reason\": \"Insufficient balance\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/withdrawal/request/:id/reject",
							"host": ["{{baseUrl}}"],
							"path": ["api", "withdrawal", "request", ":id", "reject"],
							"variable": [
								{"key": "id", "value": "1"}
							]
						}
					}
				}
			]
		},
		{
			"name": "Webhooks",
			"item": [
				{
					"name": "Tookan Webhook",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"job_id\": 12345,\n  \"job_status\": 6,\n  \"template_fields\": {\n    \"cod_amount\": 125.50,\n    \"cod_collected\": true\n  },\n  \"event_type\": \"order_updated\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/tookan/webhook",
							"host": ["{{baseUrl}}"],
							"path": ["api", "tookan", "webhook"]
						}
					}
				}
			]
		},
		{
			"name": "Metadata",
			"item": [
				{
					"name": "Get Task Metadata",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/tookan/task/:jobId/metadata",
							"host": ["{{baseUrl}}"],
							"path": ["api", "tookan", "task", ":jobId", "metadata"],
							"variable": [
								{"key": "jobId", "value": "12345"}
							]
						}
					}
				},
				{
					"name": "Set Task Metadata",
					"request": {
						"method": "PUT",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"custom_field\": \"value\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/tookan/task/:jobId/metadata",
							"host": ["{{baseUrl}}"],
							"path": ["api", "tookan", "task", ":jobId", "metadata"],
							"variable": [
								{"key": "jobId", "value": "12345"}
							]
						}
					}
				}
			]
		},
		{
			"name": "Tags",
			"item": [
				{
					"name": "Get Tag Config",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/tags/config",
							"host": ["{{baseUrl}}"],
							"path": ["api", "tags", "config"]
						}
					}
				},
				{
					"name": "Update Tag Config",
					"request": {
						"method": "PUT",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"rules\": [\n    {\n      \"condition\": \"customer_tier\",\n      \"value\": \"A\",\n      \"tags\": [\"DELIVERY_CHARGE_TIER_A\"]\n    }\n  ]\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/tags/config",
							"host": ["{{baseUrl}}"],
							"path": ["api", "tags", "config"]
						}
					}
				},
				{
					"name": "Suggest Tags",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"customer_id\": \"CU001\",\n  \"zone\": \"Manama\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/tags/suggest",
							"host": ["{{baseUrl}}"],
							"path": ["api", "tags", "suggest"]
						}
					}
				}
			]
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:3001",
			"type": "string"
		}
	]
}

